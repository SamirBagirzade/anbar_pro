{% load i18n %}
<div class="card">
  <div class="card-body p-0">
    <table class="table table-striped table-hover table-dense mb-0">
  <thead>
    <tr>
      <th>{% trans "Name" %}</th>
      <th>{% trans "Category" %}</th>
      <th>{% trans "Unit" %}</th>
      <th>{% trans "On Hand" %}</th>
      <th>{% trans "Min" %}</th>
      <th>{% trans "Last Purchase Vendor" %}</th>
      <th>{% trans "Last Purchase Price" %}</th>
      <th>{% trans "Last Purchase Date" %}</th>
      <th>{% trans "Last Issue Date" %}</th>
      <th>{% trans "Actions" %}</th>
    </tr>
  </thead>
  <tbody>
    {% for item in items %}
      <tr>
        <td><a href="{% url 'item_detail' item.id %}">{{ item.name }}</a></td>
        <td>{{ item.category }}</td>
        <td>{{ item.unit }}</td>
        <td class="{% if item.on_hand < item.min_stock %}text-danger{% endif %}">{{ item.on_hand }}</td>
        <td>{{ item.min_stock }}</td>
        <td>
          {% if item.last_purchase_vendor_color %}
            <span class="me-2" style="display:inline-block;width:10px;height:10px;border-radius:50%;background:{{ item.last_purchase_vendor_color }};"></span>
          {% endif %}
          {{ item.last_purchase_vendor }}
        </td>
        <td>{{ item.last_purchase_unit_price }}</td>
        <td>{{ item.last_purchase_date }}</td>
        <td>{{ item.last_issue_date }}</td>
        <td>
          <a class="btn btn-sm btn-outline-primary" href="{% url 'purchase_create' %}?item={{ item.id }}">{% trans "Quick Purchase" %}</a>
        </td>
      </tr>
    {% empty %}
      <tr><td colspan="10">{% trans "No items." %}</td></tr>
    {% endfor %}
  </tbody>
</table>
  </div>
</div>
<nav class="mt-3">
  <ul class="pagination">
    {% if items.has_previous %}
      <li class="page-item">
        <a class="page-link" hx-get="?{% if base_query %}{{ base_query }}&{% endif %}page={{ items.previous_page_number }}" hx-target="#stock-table" hx-push-url="true">{% trans "Prev" %}</a>
      </li>
    {% endif %}
    <li class="page-item active"><span class="page-link">{{ items.number }} / {{ items.paginator.num_pages }}</span></li>
    {% if items.has_next %}
      <li class="page-item">
        <a class="page-link" hx-get="?{% if base_query %}{{ base_query }}&{% endif %}page={{ items.next_page_number }}" hx-target="#stock-table" hx-push-url="true">{% trans "Next" %}</a>
      </li>
    {% endif %}
  </ul>
</nav>
